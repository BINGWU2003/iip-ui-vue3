// Table 组件样式
@use '../mixins/mixins' as *;
@use '../common/var' as *;

@include b(table) {
  width: 100%;

  // 分页器样式
  @include e(pagination) {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: 16px 0;
    margin-top: 16px;
    border-top: 1px solid getCssVar('border-color-lighter');

    .vxe-pager {
        --vxe-font-color: #{getCssVar('text-color-regular')};
        --vxe-primary-color: #{getCssVar('color-primary')};
        --vxe-table-border-color: #{getCssVar('border-color-light')};
    
        .vxe-pager--wrapper {
          background-color: transparent;
    
          .vxe-pager--total {
            color: getCssVar('text-color-regular');
          }
    
          .vxe-pager--page-size {
            .vxe-select {
              .vxe-input {
                background-color: getCssVar('bg-color');
                border-color: getCssVar('border-color');
                color: getCssVar('text-color-regular');
    
                &:hover {
                  border-color: getCssVar('color-primary');
                }
              }
            }
          }
    
          .vxe-pager--btn-wrapper {
    
            .vxe-pager--prev-btn,
            .vxe-pager--next-btn,
            .vxe-pager--num-btn {
              background-color: getCssVar('bg-color');
              border: 1px solid getCssVar('border-color');
              color: getCssVar('text-color-regular');
    
              &:hover:not(.is--disabled) {
                color: getCssVar('color-primary');
                border-color: getCssVar('color-primary');
              }
    
              &.is--disabled {
                color: getCssVar('text-color-disabled');
                border-color: getCssVar('border-color-light');
                cursor: not-allowed;
              }
    
              &.is--active {
                background-color: getCssVar('color-primary');
                border-color: getCssVar('color-primary');
                color: getCssVar('color-white');
              }
            }
          }
    
          .vxe-pager--jump {
            color: getCssVar('text-color-regular');
    
            .vxe-input {
              background-color: getCssVar('bg-color');
              border-color: getCssVar('border-color');
              color: getCssVar('text-color-regular');
    
              &:hover {
                border-color: getCssVar('color-primary');
              }
    
              &:focus-within {
                border-color: getCssVar('color-primary');
                box-shadow: 0 0 0 2px rgba(getCssVar('color-primary-rgb'), 0.2);
              }
            }
          }
        }
    }
  }
}

// vxe-table 主题定制
.vxe-table {
  // 表格边框颜色
  --vxe-table-border-color: #{getCssVar('border-color-light')};

  // 表头样式
  --vxe-table-header-background-color: #{getCssVar('fill-color-light')};
  --vxe-table-header-font-color: #{getCssVar('text-color-primary')};
  --vxe-table-header-font-weight: 500;

  // 表格行样式
  --vxe-table-body-background-color: #{getCssVar('bg-color')};
  --vxe-table-row-background-color: #{getCssVar('bg-color')};
  --vxe-table-row-striped-background-color: #{getCssVar('fill-color-lighter')};
  --vxe-table-row-hover-background-color: #{getCssVar('fill-color-light')};
  --vxe-table-row-hover-striped-background-color: #{getCssVar('fill-color-light')};

  // 表格字体
  --vxe-table-font-color: #{getCssVar('text-color-regular')};
  --vxe-table-font-size: 14px;

  // 选中行样式
  --vxe-table-row-current-background-color: #{getCssVar('color-primary-light-9')};
  --vxe-table-row-checkbox-checked-background-color: #{getCssVar('color-primary-light-9')};

  // 排序图标颜色
  --vxe-table-sort-asc-color: #{getCssVar('color-primary')};
  --vxe-table-sort-desc-color: #{getCssVar('color-primary')};

  // 筛选图标颜色
  --vxe-table-filter-color: #{getCssVar('text-color-regular')};
  --vxe-table-filter-active-color: #{getCssVar('color-primary')};

  // 加载遮罩
  --vxe-table-loading-background-color: rgba(255, 255, 255, 0.8);

  // 空数据提示
  --vxe-table-empty-color: #{getCssVar('text-color-placeholder')};
  --vxe-table-empty-font-size: 14px;

  // 复选框样式
  .vxe-checkbox {
    --vxe-checkbox-icon-color: #{getCssVar('color-white')};
    --vxe-checkbox-checked-icon-color: #{getCssVar('color-white')};
    --vxe-checkbox-checked-background-color: #{getCssVar('color-primary')};
    --vxe-checkbox-checked-border-color: #{getCssVar('color-primary')};
    --vxe-checkbox-border-color: #{getCssVar('border-color')};
    --vxe-checkbox-background-color: #{getCssVar('bg-color')};
  }

  // 单元格内边距
  .vxe-body--column,
  .vxe-header--column,
  .vxe-footer--column {
    padding: 12px 8px;
  }

  // 表格边框圆角
  &.vxe-table--border {
    border-radius: getCssVar('border-radius-base');

    .vxe-table--header-wrapper {
      .vxe-table--header {
        .vxe-header--row:first-child {
          .vxe-header--column:first-child {
            border-top-left-radius: getCssVar('border-radius-base');
          }
          .vxe-header--column:last-child {
            border-top-right-radius: getCssVar('border-radius-base');
          }
        }
      }
    }

    .vxe-table--body-wrapper {
      .vxe-table--body {
        .vxe-body--row:last-child {
          .vxe-body--column:first-child {
            border-bottom-left-radius: getCssVar('border-radius-base');
          }
          .vxe-body--column:last-child {
            border-bottom-right-radius: getCssVar('border-radius-base');
          }
        }
      }
    }
  }
}

// 暗色主题适配
[data-theme='dark'] {
  .vxe-table {
    --vxe-table-border-color: #{getCssVar('border-color-dark')};
    --vxe-table-header-background-color: #{getCssVar('fill-color-dark')};
    --vxe-table-body-background-color: #{getCssVar('bg-color-page')};
    --vxe-table-row-background-color: #{getCssVar('bg-color-page')};
    --vxe-table-row-striped-background-color: #{getCssVar('fill-color-darker')};
    --vxe-table-row-hover-background-color: #{getCssVar('fill-color-dark')};
    --vxe-table-loading-background-color: rgba(0, 0, 0, 0.8);

    .vxe-checkbox {
      --vxe-checkbox-border-color: #{getCssVar('border-color-dark')};
      --vxe-checkbox-background-color: #{getCssVar('bg-color-page')};
    }
  }

  @include b(table) {
    @include e(pagination) {
      border-top-color: getCssVar('border-color-dark');
    }
  }
}

// 响应式适配
@media (max-width: 768px) {
  @include b(table) {
    @include e(pagination) {
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;

      .vxe-pager {
          --vxe-font-size: 12px;
      
          .vxe-pager--wrapper {
            flex-wrap: wrap;
            gap: 4px;
          }
      }
    }
  }

  .vxe-table {
    --vxe-table-font-size: 12px;

    .vxe-body--column,
    .vxe-header--column,
    .vxe-footer--column {
      padding: 8px 4px;
    }
  }
}
